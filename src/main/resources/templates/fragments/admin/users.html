<html xmlns:th="https://www.thymeleaf.org">
<head>
<title>ATS - Users</title>
</head>
<body>
	<div th:fragment="all-users">
		<div class="page-header">
			<h2 class="page-title"><i class="fas fa-users-cog"></i> User Management</h2>
			<p class="page-subtitle">Manage all user accounts in the system</p>
		</div>

		<div th:if="${message}" class="alert alert-success mb-4">
			<i class="fas fa-check-circle alert-icon"></i>
			<div class="alert-content">
				<strong>Success!</strong> <span th:text="${message}"></span>
			</div>
		</div>

		<div class="flex justify-between items-center mb-4 flex-wrap gap-4">
			<div class="form-group mb-0" style="min-width: 250px;">
				<div style="position: relative;">
					<i class="fas fa-search" style="position: absolute; left: var(--space-3); top: 50%; transform: translateY(-50%); color: var(--gray-400);"></i>
					<input
						class="form-input"
						style="padding-left: var(--space-10);"
						type="text"
						placeholder="Search users..."
						ng-model="users">
				</div>
			</div>
		</div>

		<div class="table-container">
			<table class="table">
				<thead>
					<tr>
						<th style="width: 50px;">#</th>
						<th>Name</th>
						<th>Email</th>
						<th>Joined on</th>
						<th style="width: 100px;">Status</th>
						<th style="width: 100px;">Action</th>
					</tr>
				</thead>
				<tbody>
					<tr th:if="${users.size()==0}">
						<td colspan="6" class="text-center text-gray-500">
							<div class="empty-state" style="padding: var(--space-6);">
								<div class="empty-state-icon" style="font-size: 32px;">
									<i class="fas fa-users-slash"></i>
								</div>
								<p>No users found</p>
							</div>
						</td>
					</tr>
					<tr th:each="user,itr: ${users}"
						th:ng-if="'doSearchUser(\'' + ${user.username}  + '\',\'' + ${user.email} + '\')'">
						<td th:text="${itr.index + 1}">1</td>
						<td class="font-medium" th:text="${user.username}">Name</td>
						<td th:text="${user.email}">Email</td>
						<td th:text="${#dates.format(user.createdOn, 'dd MMM yyyy')}">Date</td>
						<td>
							<span th:if="${!user.isLocked}" class="badge badge-solid-success">
								<i class="fas fa-check-circle"></i> Active
							</span>
							<span th:if="${user.isLocked}" class="badge badge-solid-danger">
								<i class="fas fa-lock"></i> Locked
							</span>
						</td>
						<td>
							<form method="post" th:action="@{/admin/user/reset}" class="mb-0">
								<input type="hidden" name="user" th:value="${user.userId}" />
								<button type="submit"
									class="btn btn-xs btn-danger"
									title="Reset User">
									<i class="fas fa-undo"></i> Reset
								</button>
							</form>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>
</html>