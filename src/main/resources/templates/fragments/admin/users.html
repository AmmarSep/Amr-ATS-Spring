<html xmlns:th="https://www.thymeleaf.org">
<head>
<title>ATS - Users</title>
</head>
<body>
	<div th:fragment="all-users" class="main-content-compact">
		<h2>User Management</h2>
		
		<div th:if="${message}"
			class="bg-green-100 border border-green-400 text-green-700 px-3 py-2 mb-3 rounded relative"
			role="alert">
			<strong class="font-medium">Success!</strong> <span
				class="block sm:inline" th:text="${message}"></span>
		</div>
		
		<div class="flex justify-between items-center mb-3">
			<div class="form-compact">
				<input
					class="border rounded py-1 px-2 text-sm"
					type="text" placeholder="Search here" ng-model="users">
			</div>
		</div>
		
		<div class="overflow-x-auto">
			<table class="table-compact w-full border-collapse min-w-max">
				<thead>
					<tr>
						<th class="border text-left w-8">#</th>
						<th class="border text-left w-48">Name</th>
						<th class="border text-left w-64">Email</th>
						<th class="border text-left w-32">Joined on</th>
						<th class="border text-left w-20">Status</th>
						<th class="border text-left w-24">Action</th>
					</tr>
				</thead>
				<tbody>
					<tr th:if="${users.size()==0}">
						<td colspan="6" class="border p-3 text-center text-gray-500 text-sm">No users found</td>
					</tr>
					<tr th:each="user,itr: ${users}" class="hover:bg-gray-50"
						th:ng-if="'doSearchUser(\'' + ${user.username}  + '\',\'' + ${user.email} + '\')'">
						<td class="border" th:text="${itr.index + 1}">1</td>
						<td class="border" th:text="${user.username}">Name</td>
						<td class="border" th:text="${user.email}">Email</td>
						<td class="border" th:text="${#dates.format(user.createdOn, 'dd MMM yyyy')}">Date</td>
						<td class="border">
							<span th:if="${!user.isLocked}" class="status-badge-compact bg-green-600 text-white">●</span>
							<span th:if="${user.isLocked}" class="status-badge-compact bg-red-600 text-white">●</span>
						</td>
						<td class="border">
							<form method="post" th:action="@{/admin/user/reset}" class="mb-0">
								<input type="hidden" name="user" th:value="${user.userId}" />
								<button type="submit"
									class="action-btn-compact bg-red-500 hover:bg-red-600 text-white"
									title="Reset User">
									⟲
								</button>
							</form>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>
</html>